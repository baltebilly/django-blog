{% extends 'base.html' %}

{% load static %}

{% block content %}
  <div class="card shadow-sm p-4 mb-4">
    <!-- Post Title -->
    <h2 class="mb-3">{{ post.title }}</h2>

    <!-- Meta with author picture -->
    <p class="text-muted d-flex align-items-center">
      {% if post.author.profile.avatar %}
        <img src="{{ post.author.profile.avatar.url }}" 
             alt="{{ post.author.username }}'s avatar"
             class="rounded-circle me-2 shadow-sm"
             width="40" height="40" style="object-fit: cover;">
      {% else %}
        <img src="{% static 'profile_pics/default.webp' %}" 
             alt="Default avatar"
             class="rounded-circle me-2 shadow-sm"
             width="40" height="40" style="object-fit: cover;">
      {% endif %}
      <strong> {{ post.author }} </strong> - {{ post.created|date:"M d, Y H:i" }}
    </p>

    <!-- Body -->
    <div class="mb-4">
      {{ post.content|linebreaks }}
    </div>

    <!-- Actions (only for authenticated users who are the author) -->
    {% if user.is_authenticated and user == post.author %}
      <div class="d-flex gap-3 mb-3">
        <a href="{% url 'post_update' post.pk %}" class="btn btn-outline-primary">Update</a>
        <a href="{% url 'post_delete' post.pk %}" class="btn btn-delete">Delete</a>
      </div>
    {% endif %}

    <!-- Back button -->
    <a href="{% url 'post_list' %}" class="btn btn-cancel">‚Üê Back to all posts</a>
  </div>
{% endblock %}
